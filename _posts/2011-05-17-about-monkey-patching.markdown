---
layout: post
title: Обезьяньи заплатки по человечьи. Часть вторая.
published: false
tags:
  - monkey patching
  - oop
  - ruby
---

В предыдущем посте был небольшой пример применения monkey patching
прямиком из Rails.

В этом посте будет небольшой обзор вещей, связанных с патчингом.

# Open classes

По сравнению с другими языками, в Ruby все классы являются открытыми.
Что это значит? Ну к примеру следующие два куска кода имеют одинаковый
эффект:

<script src="https://gist.github.com/976221.js?file=gistfile1.rb"></script>

и:

<script src="https://gist.github.com/976221.js?file=gistfile2.rb"></script>

В этом примере мы определяем методы `foo`, `bar` для класса `A` в разном порядке.
Порядок разницы не имеет, и в обоих случаях объект `a` будет иметь два метода
`foo` и `bar`. Таким же образом может быть доопределён любой метод для любого класса.
Это крайне мощная техника, но и в то же время опасная.

Т.к. доопределяемый метод имеет доступ к приватным переменным, то это
может способствовать написанию непереносимого кода. 
